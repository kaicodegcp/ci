Step 1 ‚Äî List jobs (already works)
./cde job list \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


‚úÖ confirms your jobs: spark-pi, test-pi-nov3, etc.

üß© Step 2 ‚Äî Describe the job definition
./cde job describe spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


This shows configuration (file, className, etc.), not runtime logs.

ü™µ Step 3 ‚Äî See the latest job run status

In your CLI version, this is done through:

./cde job run spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure \
  --wait


üëâ This re-runs the job and waits for completion, printing:

Job run XX submitted. Waiting...
Job run XX succeeded


If you want to see output logs, append:

--show-logs


so it becomes:

./cde job run spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure \
  --wait \
  --show-logs

‚úÖ Output you should see

At the bottom of the output, look for a line like:

Pi is roughly 3.141592653589793


That confirms the SparkPi sample ran successfully on your virtual cluster.

üß† Summary



Describe job (use --name)
./cde job describe \
  --name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


This will show the full definition including file, className, memory, cores, etc.

2Ô∏è‚É£ Run job again & show logs

This CLI doesn‚Äôt have a separate ‚Äúlogs‚Äù or ‚Äúruns‚Äù subcommand, so use the single run command with --show-logs:

./cde job run \
  --name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure \
  --wait \
  --show-logs


This will:

Submit the job

Wait until it completes

Stream the full Spark driver logs directly to your terminal

At the end, you should see:

Job run XX succeeded
Pi is roughly 3.141592653589793

3Ô∏è‚É£ (Optional) Re-list all jobs

If you just want to see available jobs again:

./cde job list \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


./cde job describe \
  --name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure \
  --last-run



===

./cde job run \
  --name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure \
  --wait \
  --verbose


curl -k -X GET \
  -H "Authorization: Bearer $(cat ~/.cache/cloudera/cde/token-cache)" \
  "https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs/42/logs" | jq -r '.driverLog'


curl -k -X GET \
  -H "Authorization: Bearer $(cat ~/.cache/cloudera/cde/token-cache)" \
  "https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs" | jq .


RUN_ID=$(curl -sk -H "Authorization: Bearer $(cat ~/.cache/cloudera/cde/token-cache)" \
"https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs" | jq -r '.[0].id')

curl -sk -H "Authorization: Bearer $(cat ~/.cache/cloudera/cde/token-cache)" \
"https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs/${RUN_ID}/logs" | jq -r '.driverLog'

----

./cde job describe \
  --name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure

curl -sk -H "Authorization: Bearer $(cat ~/.cache/cloudera/cde/token-cache)" \
"https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs/42/logs" | jq -r '.driverLog'


./cde job list \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure
cat ~/.cache/cloudera/cde/token-cache

====
Step 3. Get latest run ID

Run this:

curl -sk -H "Authorization: Bearer $(cat ~/.cache/cloudera/cde/token-cache)" \
"https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs" | jq -r '.[0].id'


You should see:

42

Step 4. Fetch and display driver logs

Now fetch logs of that run:

curl -sk -H "Authorization: Bearer $(cat ~/.cache/cloudera/cde/token-cache)" \
"https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs/42/logs" | jq -r '.driverLog' | grep "Pi"



1Ô∏è‚É£ Extract the real access token properly

Run this:

cat ~/.cache/cloudera/cde/token-cache | jq -r '.[].access_token' > /tmp/cde_token.txt


Verify it:

cat /tmp/cde_token.txt


‚úÖ It should print a single very long line, starting with:

eyJq...

üß© 2Ô∏è‚É£ Then re-run the curl commands using this clean token

To get latest run ID:

curl -sk -H "Authorization: Bearer $(cat /tmp/cde_token.txt)" \
"https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs" \
| jq -r '.[0].id'


To get driver logs for that run (example run 42):

curl -sk -H "Authorization: Bearer $(cat /tmp/cde_token.txt)" \
"https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs/42/logs" \
| jq -r '.driverLog' | grep "Pi"



Output should show:

=============

Final, Working Commands (Simplest Possible)
Step 1 ‚Äî Set your variables
VC_URL="https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1"
TOKEN=$(cat ~/.cache/cloudera/cde/token-cache | jq -r '.[].access_token')
JOB="spark-pi"

Step 2 ‚Äî Find the latest run ID
curl -sk -H "Authorization: Bearer $TOKEN" "$VC_URL/jobs/$JOB/runs?limit=1" | jq -r '.runs[0].id'


That will print something like:

42

Step 3 ‚Äî Show full driver log for that run
RUN_ID=42
curl -sk -H "Authorization: Bearer $TOKEN" "$VC_URL/jobs/$JOB/runs/$RUN_ID/logs" | jq -r '.driverLog'


üí° Tip:
If you just want to see everything without formatting or parsing errors:

curl -sk -H "Authorization: Bearer $TOKEN" "$VC_URL/jobs/$JOB/runs/$RUN_ID/logs"


That prints full JSON (you can scroll and find your ‚ÄúPi is roughly ‚Ä¶‚Äù output).

Optional (Compact One-Liner):

If you just want one simple line to run and see everything:

TOKEN=$(cat ~/.cache/cloudera/cde/token-cache | jq -r '.[].access_token'); curl -sk -H "Authorization: Bearer $TOKEN" "https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs/42/logs" | jq -r '.driverLog'

‚úÖ Expected Output Example:
Starting job SparkPi...
...
Pi is roughly 3.141592653589793
Job completed successfully


.........

Fixed Working Command Set
Step 1 ‚Äî Set these environment variables
export VC_BASE="https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net"
export TOKEN=$(cat ~/.cache/cloudera/cde/token-cache | jq -r '.[].access_token')
export JOB_NAME="spark-pi"

Step 2 ‚Äî List recent job runs
curl -sk -H "Authorization: Bearer $TOKEN" \
"$VC_BASE/gateway/cdp-proxy-api/cde/api/v1/jobs/$JOB_NAME/runs?limit=5" | jq .


This should finally return JSON with a list of runs and their IDs.

Step 3 ‚Äî Pick latest run ID

For example:

RUN_ID=$(curl -sk -H "Authorization: Bearer $TOKEN" \
"$VC_BASE/gateway/cdp-proxy-api/cde/api/v1/jobs/$JOB_NAME/runs?limit=1" | jq -r '.runs[0].id')
echo $RUN_ID

Step 4 ‚Äî Show driver log for that run
curl -sk -H "Authorization: Bearer $TOKEN" \
"$VC_BASE/gateway/cdp-proxy-api/cde/api/v1/jobs/$JOB_NAME/runs/$RUN_ID/logs" | jq -r '.driverLog'

‚úÖ Expected output
Starting job SparkPi...
Pi is roughly 3.141592653589793
Job completed successfully.

üß© If it still 404s

Run just this to discover the correct root:

curl -sk -H "Authorization: Bearer $TOKEN" "$VC_BASE/gateway/cdp-proxy-api/cde/api/v1/jobs" | head


If that works, you‚Äôre good.
If not, try the variant some CDE versions use:

"$VC_BASE/gateway/default/cde/api/v1/jobs"

curl -sk -H "Authorization: Bearer $(cat ~/.cache/cloudera/cde/token-cache | jq -r '.[].access_token')" \
"https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1/jobs/spark-pi/runs"

