Next Steps ‚Äî Create and Run the Spark Job

Now that the resource exists, you can define a Spark job and run it.

1Ô∏è‚É£ Create the Spark Job

Run the following:

./cde resource create \
  --name spark-examples \
  --type files \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure \
  --verbose


./cde job create \
  --name spark-pi \
  --type spark \
  --mount-1-resource spark-examples \
  --application-file spark-examples_2.11-2.4.8.7.1.9.1045-5.jar \
  --class org.apache.spark.examples.SparkPi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


Expected:

INFO Created job spark-pi

2Ô∏è‚É£ Run the Job
./cde job run \
  --name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure \
  --wait


Expected:

INFO Job spark-pi started
INFO Job spark-pi completed successfully


To see all runs and their statuses:

./cde job runs list \
  --name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


This will output something like:

ID   STATUS      STARTED                  ENDED
42   SUCCEEDED   2025-11-06T18:10:12Z     2025-11-06T18:12:30Z

üßæ 2Ô∏è‚É£ View Logs (and Spark Output)

To see the full driver and executor logs for your successful job run:

./cde job run describe \
  --name spark-pi \
  --run-id 42 \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


Look for a line similar to this in the output:

Pi is roughly 3.141592653589793


‚Äîthat‚Äôs the SparkPi sample result.

üß∞ 3Ô∏è‚É£ (Optional) Stream Logs Live

You can also stream logs while a job is running:

./cde job run logs \
  --name spark-pi \
  --run-id 42 \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


This works on all CDE CLI versions:

./cde job run list \
  --name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


‚úÖ Expected output (sample):

ID   STATUS      STARTED                  ENDED
42   SUCCEEDED   2025-11-06T18:10:12Z     2025-11-06T18:12:30Z
41   FAILED      2025-11-06T17:55:00Z     2025-11-06T17:56:10Z


Note the numeric run ID (e.g., 42).

üßæ Step 2 ‚Äì Describe or view logs for that run
Option A ‚Äì Describe the run
./cde job run describe spark-pi 42 \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure

Option B ‚Äì Fetch driver logs
./cde job run logs spark-pi 42 \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


‚ö†Ô∏è Notice that here the run ID (42) follows the job name without --run-id ‚Äî that‚Äôs why your earlier command errored out.

üîç Step 3 ‚Äì Look for this line in output




Step 1 ‚Äî See all jobs
./cde job list \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


That will confirm the job name (e.g., spark-pi) and ID.

üßæ Step 2 ‚Äî See all runs for that job
./cde run list \
  --job-name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


That should print something like:

ID   STATUS      STARTED                  ENDED
42   SUCCEEDED   2025-11-06T18:10:12Z     2025-11-06T18:12:30Z

ü™µ Step 3 ‚Äî View logs for that specific run
./cde run logs 42 \
  --job-name spark-pi \
  --vcluster-endpoint https://4n9wpd5l.cde-k4sg67rt.apps.mlab-ctigtdcai03d.ecs.dyn.nsroot.net/dex/api/v1 \
  --credentials-file /root/.cdp/credentials \
  --tls-insecure


You should now see the Spark driver output ‚Äî look for:

Pi is roughly 3.141592653589793

You should see something like:

INFO SparkPi: Pi is roughly 3.141592653589793
